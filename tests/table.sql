CREATE TABLE IF NOT EXISTS `magictriggerDB` (
           `added` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
           `magicId` INT(11) NOT NULL,
           `dow` TINYINT(1) UNSIGNED NOT NULL,
           `time` MEDIUMINT(4) UNSIGNED NOT NULL
           ) ENGINE=InnoDB DEFAULT CHARSET=utf8;


DROP TABLE IF EXISTS `magictriggerDB`;


SELECT dow, COUNT(*) FROM magictriggerDB GROUP BY dow ORDER BY dow;

MariaDB [jeedom]> SELECT dow, COUNT(*) FROM magictriggerDB GROUP BY dow ORDER BY dow;
+-----+----------+
| dow | COUNT(*) |
+-----+----------+
|   0 |       30 |
|   1 |       55 |
|   2 |      115 |
|   3 |       50 |
|   4 |      250 |
|   5 |       90 |
|   6 |       70 |
+-----+----------+
7 rows in set (0.005 sec)

SELECT magicId, dow, time from magictriggerDB where dow=1 ORDER BY TIME;

MariaDB [jeedom]> SELECT magicId, dow, time from magictriggerDB where dow=1 ORDER BY TIME;
+---------+-----+------+
| magicId | dow | time |
+---------+-----+------+
|       9 |   1 |   11 |
|       9 |   1 |  155 |
|       9 |   1 |  345 |
|       9 |   1 |  529 |
|       9 |   1 |  858 |
|       9 |   1 | 1630 |
|       9 |   1 | 1631 |
|       9 |   1 | 1631 |
|       9 |   1 | 1632 |
|       9 |   1 | 1632 |
|       9 |   1 | 1633 |
|       9 |   1 | 1634 |
|       9 |   1 | 1634 |
|       9 |   1 | 1636 |
|       9 |   1 | 1636 |
|       9 |   1 | 1639 |
|       9 |   1 | 1639 |
|       9 |   1 | 1640 |
|       9 |   1 | 1640 |
|       9 |   1 | 1641 |
|       9 |   1 | 1641 |
|       9 |   1 | 1641 |
|       9 |   1 | 1642 |
|       9 |   1 | 1642 |
|       9 |   1 | 1642 |
|       9 |   1 | 1642 |
|       9 |   1 | 1643 |
|       9 |   1 | 1644 |
|       9 |   1 | 1644 |
|       9 |   1 | 1644 |
|       9 |   1 | 1644 |
|       9 |   1 | 1645 |
|       9 |   1 | 1646 |
|       9 |   1 | 1646 |
|       9 |   1 | 1647 |
|       9 |   1 | 1647 |
|       9 |   1 | 1648 |
|       9 |   1 | 1649 |
|       9 |   1 | 1651 |
|       9 |   1 | 1651 |
|       9 |   1 | 1652 |
|       9 |   1 | 1655 |
|       9 |   1 | 1655 |
|       9 |   1 | 1655 |
|       9 |   1 | 1656 |
|       9 |   1 | 1656 |
|       9 |   1 | 1657 |
|       9 |   1 | 1657 |
|       9 |   1 | 1658 |
|       9 |   1 | 1658 |
|       9 |   1 | 1658 |
|       9 |   1 | 1659 |
|       9 |   1 | 1659 |
|       9 |   1 | 1659 |
|       9 |   1 | 1659 |
+---------+-----+------+
55 rows in set (0.003 sec)

MariaDB [jeedom]> 



MariaDB [jeedom]> select magicId, dow, time, count(time) from magictriggerDB where dow=1 group by time;
+---------+-----+------+-------------+
| magicId | dow | time | count(time) |
+---------+-----+------+-------------+
|       9 |   1 |   11 |           1 |
|       9 |   1 |  155 |           1 |
|       9 |   1 |  345 |           1 |
|       9 |   1 |  529 |           1 |
|       9 |   1 |  858 |           1 |
|       9 |   1 | 1630 |           1 |
|       9 |   1 | 1631 |           2 |
|       9 |   1 | 1632 |           2 |
|       9 |   1 | 1633 |           1 |
|       9 |   1 | 1634 |           2 |
|       9 |   1 | 1636 |           2 |
|       9 |   1 | 1639 |           2 |
|       9 |   1 | 1640 |           2 |
|       9 |   1 | 1641 |           3 |
|       9 |   1 | 1642 |           4 |
|       9 |   1 | 1643 |           1 |
|       9 |   1 | 1644 |           4 |
|       9 |   1 | 1645 |           1 |
|       9 |   1 | 1646 |           2 |
|       9 |   1 | 1647 |           2 |
|       9 |   1 | 1648 |           1 |
|       9 |   1 | 1649 |           1 |
|       9 |   1 | 1651 |           2 |
|       9 |   1 | 1652 |           1 |
|       9 |   1 | 1655 |           3 |
|       9 |   1 | 1656 |           2 |
|       9 |   1 | 1657 |           2 |
|       9 |   1 | 1658 |           3 |
|       9 |   1 | 1659 |           4 |
+---------+-----+------+-------------+
29 rows in set (0.003 sec)

MariaDB [jeedom]> 
MariaDB [jeedom]> select magicId, dow, count(time) from magictriggerDB where dow=1 and time > 1630 and time < 1645;
+---------+------+-------------+
| magicId | dow  | count(time) |
+---------+------+-------------+
|       9 |    1 |          25 |
+---------+------+-------------+
1 row in set (0.003 sec)

MariaDB [jeedom]> 

# ----- 

SELECT magicId, dow, time, COUNT(*) AS count
FROM magictriggerDB
WHERE magicId=9
GROUP BY time
ORDER BY magicId, dow, time


+---------+-----+------+-------+
| magicId | dow | time | count |
+---------+-----+------+-------+
|       9 |   0 |  112 |     1 |
|       9 |   0 |  127 |     1 |
|       9 |   0 |  226 |     1 |
|       9 |   0 |  305 |     1 |
|       9 |   0 |  430 |     1 |
|       9 |   0 |  549 |     1 |
|       9 |   0 |  650 |     1 |
|       9 |   0 |  826 |     1 |
|       9 |   0 |  831 |     1 |
|       9 |   0 |  916 |     1 |
|       9 |   0 |  946 |     1 |
|       9 |   0 | 1021 |     1 |
|       9 |   0 | 1147 |     1 |
|       9 |   0 | 1207 |     1 |
|       9 |   0 | 1226 |     1 |
|       9 |   0 | 1330 |     1 |
|       9 |   0 | 1332 |     1 |
|       9 |   0 | 1336 |     1 |
|       9 |   0 | 1358 |     1 |
|       9 |   0 | 1454 |     1 |
|       9 |   0 | 1513 |    12 |
|       9 |   0 | 1746 |     1 |
|       9 |   0 | 1757 |     1 |
|       9 |   0 | 1801 |     1 |
|       9 |   0 | 2032 |     1 |
|       9 |   0 | 2042 |     1 |
|       9 |   0 | 2303 |     1 |
|       9 |   0 | 2354 |     1 |
|       9 |   0 | 2357 |     1 |
|       9 |   1 |   11 |     1 |
|       9 |   1 |  155 |     1 |
|       9 |   1 |  345 |     1 |
|       9 |   1 |  529 |     1 |
|       9 |   1 |  858 |     1 |
|       9 |   1 | 1630 |     8 |
|       9 |   1 | 1631 |     8 |
|       9 |   1 | 1632 |     9 |
|       9 |   1 | 1633 |    12 |
|       9 |   1 | 1634 |     7 |
|       9 |   1 | 1636 |     7 |
|       9 |   1 | 1639 |     9 |
|       9 |   1 | 1640 |     7 |
|       9 |   1 | 1641 |     3 |
|       9 |   1 | 1642 |     4 |
|       9 |   1 | 1643 |     1 |
|       9 |   1 | 1644 |     5 |
|       9 |   1 | 1645 |     1 |
|       9 |   1 | 1646 |     2 |
|       9 |   1 | 1648 |     1 |
|       9 |   1 | 1649 |     1 |
|       9 |   1 | 1651 |     2 |
|       9 |   1 | 1652 |     1 |
|       9 |   1 | 1655 |     3 |
|       9 |   1 | 1656 |     2 |
|       9 |   1 | 1658 |     3 |
|       9 |   1 | 1659 |     4 |
|       9 |   2 |  216 |     1 |
|       9 |   2 |  328 |     1 |
|       9 |   2 |  407 |     1 |
|       9 |   2 |  411 |     1 |
|       9 |   2 |  421 |     1 |
|       9 |   2 |  558 |     1 |
|       9 |   2 |  623 |     1 |
|       9 |   2 |  851 |     1 |
|       9 |   2 | 1316 |     1 |
|       9 |   2 | 1317 |     1 |
|       9 |   2 | 1341 |     1 |
|       9 |   2 | 1500 |     2 |
|       9 |   2 | 1501 |     5 |
|       9 |   2 | 1502 |     9 |
|       9 |   2 | 1503 |     9 |
|       9 |   2 | 1506 |     5 |
|       9 |   2 | 1507 |    10 |
|       9 |   2 | 1508 |     6 |
|       9 |   2 | 1509 |     6 |
|       9 |   2 | 1510 |     4 |
|       9 |   2 | 1511 |    11 |
|       9 |   2 | 1512 |     6 |
|       9 |   2 | 1514 |     4 |
|       9 |   2 | 1515 |     8 |
|       9 |   2 | 1516 |     4 |
|       9 |   2 | 1518 |     9 |
|       9 |   2 | 1519 |     5 |
|       9 |   2 | 1520 |     8 |
|       9 |   2 | 1521 |     7 |
|       9 |   2 | 1522 |     9 |
|       9 |   2 | 1523 |    10 |
|       9 |   2 | 1524 |    10 |
|       9 |   2 | 1853 |     2 |
|       9 |   2 | 1957 |     1 |
|       9 |   2 | 2148 |     1 |
|       9 |   2 | 2305 |     1 |
|       9 |   3 |  452 |     1 |
|       9 |   3 |  455 |     1 |
|       9 |   3 |  618 |     1 |
|       9 |   3 |  645 |     1 |
|       9 |   3 |  804 |     1 |
|       9 |   3 |  915 |     1 |
|       9 |   3 |  950 |     1 |
|       9 |   3 | 1108 |     1 |
|       9 |   3 | 1230 |     5 |
|       9 |   3 | 1231 |     3 |
|       9 |   3 | 1232 |     3 |
|       9 |   3 | 1233 |     3 |
|       9 |   3 | 1235 |     1 |
|       9 |   3 | 1236 |     3 |
|       9 |   3 | 1238 |     1 |
|       9 |   3 | 1239 |     2 |
|       9 |   3 | 1240 |     1 |
|       9 |   3 | 1250 |     1 |
|       9 |   3 | 1323 |     1 |
|       9 |   3 | 1402 |     1 |
|       9 |   3 | 1440 |     1 |
|       9 |   3 | 1504 |     4 |
|       9 |   3 | 1657 |     3 |
|       9 |   3 | 1706 |     2 |
|       9 |   3 | 1809 |     2 |
|       9 |   3 | 1914 |     1 |
|       9 |   3 | 1939 |     1 |
|       9 |   3 | 2014 |     1 |
|       9 |   3 | 2121 |     1 |
|       9 |   3 | 2122 |     1 |
|       9 |   3 | 2221 |     1 |
|       9 |   3 | 2312 |     1 |
|       9 |   3 | 2327 |     1 |
|       9 |   4 |    7 |     1 |
|       9 |   4 |  107 |     1 |
|       9 |   4 |  141 |     1 |
|       9 |   4 |  154 |     1 |
|       9 |   4 |  200 |     1 |
|       9 |   4 |  229 |     1 |
|       9 |   4 |  237 |     1 |
|       9 |   4 |  244 |     1 |
|       9 |   4 |  248 |     2 |
|       9 |   4 |  313 |     1 |
|       9 |   4 |  348 |     1 |
|       9 |   4 |  349 |     1 |
|       9 |   4 |  410 |     1 |
|       9 |   4 |  417 |     1 |
|       9 |   4 |  422 |     1 |
|       9 |   4 |  608 |     1 |
|       9 |   4 |  639 |     1 |
|       9 |   4 |  710 |     1 |
|       9 |   4 |  712 |     1 |
|       9 |   4 |  715 |     2 |
|       9 |   4 |  742 |     1 |
|       9 |   4 |  805 |     1 |
|       9 |   4 |  816 |     1 |
|       9 |   4 |  833 |     1 |
|       9 |   4 |  926 |     1 |
|       9 |   4 | 1009 |     1 |
|       9 |   4 | 1045 |     1 |
|       9 |   4 | 1059 |     1 |
|       9 |   4 | 1118 |     1 |
|       9 |   4 | 1124 |     1 |
|       9 |   4 | 1126 |     1 |
|       9 |   4 | 1415 |     2 |
|       9 |   4 | 1434 |     1 |
|       9 |   4 | 1458 |     1 |
|       9 |   4 | 1505 |     9 |
|       9 |   4 | 1517 |     1 |
|       9 |   4 | 1525 |     7 |
|       9 |   4 | 1526 |     1 |
|       9 |   4 | 1527 |     5 |
|       9 |   4 | 1528 |     5 |
|       9 |   4 | 1529 |     4 |
|       9 |   4 | 1530 |     3 |
|       9 |   4 | 1531 |     2 |
|       9 |   4 | 1532 |     3 |
|       9 |   4 | 1533 |     2 |
|       9 |   4 | 1534 |     5 |
|       9 |   4 | 1535 |     3 |
|       9 |   4 | 1536 |     5 |
|       9 |   4 | 1537 |     4 |
|       9 |   4 | 1538 |     2 |
|       9 |   4 | 1539 |     3 |
|       9 |   4 | 1540 |     8 |
|       9 |   4 | 1541 |     2 |
|       9 |   4 | 1542 |     4 |
|       9 |   4 | 1543 |     6 |
|       9 |   4 | 1544 |     3 |
|       9 |   4 | 1545 |     2 |
|       9 |   4 | 1546 |     5 |
|       9 |   4 | 1547 |     6 |
|       9 |   4 | 1548 |     8 |
|       9 |   4 | 1549 |     3 |
|       9 |   4 | 1550 |     7 |
|       9 |   4 | 1551 |     2 |
|       9 |   4 | 1552 |     3 |
|       9 |   4 | 1553 |     3 |
|       9 |   4 | 1554 |     2 |
|       9 |   4 | 1555 |     2 |
|       9 |   4 | 1556 |     5 |
|       9 |   4 | 1558 |     7 |
|       9 |   4 | 1559 |     1 |
|       9 |   4 | 1601 |     1 |
|       9 |   4 | 1846 |     1 |
|       9 |   4 | 1907 |     1 |
|       9 |   4 | 1915 |     1 |
|       9 |   4 | 1955 |     2 |
|       9 |   4 | 2001 |     1 |
|       9 |   4 | 2029 |     1 |
|       9 |   4 | 2036 |     1 |
|       9 |   4 | 2110 |     1 |
|       9 |   4 | 2235 |     1 |
|       9 |   4 | 2317 |     1 |
|       9 |   5 |  224 |     1 |
|       9 |   5 |  251 |     1 |
|       9 |   5 |  356 |     1 |
|       9 |   5 |  412 |     1 |
|       9 |   5 |  919 |     1 |
|       9 |   5 | 1035 |     1 |
|       9 |   5 | 1120 |     1 |
|       9 |   5 | 1131 |     1 |
|       9 |   5 | 1151 |     1 |
|       9 |   5 | 1321 |     2 |
|       9 |   5 | 1343 |     1 |
|       9 |   5 | 1635 |     8 |
|       9 |   5 | 1637 |     6 |
|       9 |   5 | 1638 |     8 |
|       9 |   5 | 1647 |     3 |
|       9 |   5 | 1842 |     1 |
|       9 |   5 | 1956 |     1 |
|       9 |   6 |   45 |     1 |
|       9 |   6 |   49 |     1 |
|       9 |   6 |  158 |     2 |
|       9 |   6 |  322 |     1 |
|       9 |   6 |  535 |     1 |
|       9 |   6 |  554 |     1 |
|       9 |   6 |  734 |     1 |
|       9 |   6 |  920 |     1 |
|       9 |   6 | 1040 |     1 |
|       9 |   6 | 1212 |     1 |
|       9 |   6 | 1234 |     5 |
|       9 |   6 | 1337 |     1 |
|       9 |   6 | 1605 |     1 |
|       9 |   6 | 1612 |     1 |
|       9 |   6 | 1613 |     1 |
|       9 |   6 | 1619 |     1 |
|       9 |   6 | 1627 |     1 |
|       9 |   6 | 1628 |     1 |
|       9 |   6 | 1703 |     1 |
|       9 |   6 | 1704 |     1 |
|       9 |   6 | 1705 |     1 |
|       9 |   6 | 1714 |     1 |
|       9 |   6 | 1715 |     2 |
|       9 |   6 | 1717 |     1 |
|       9 |   6 | 1725 |     1 |
|       9 |   6 | 1726 |     1 |
|       9 |   6 | 1728 |     1 |
|       9 |   6 | 1733 |     1 |
|       9 |   6 | 1734 |     1 |
|       9 |   6 | 1736 |     1 |
|       9 |   6 | 1758 |     1 |
|       9 |   6 | 1808 |     1 |
|       9 |   6 | 1810 |     1 |
|       9 |   6 | 1814 |     2 |
|       9 |   6 | 1816 |     1 |
|       9 |   6 | 1819 |     1 |
|       9 |   6 | 1822 |     1 |
|       9 |   6 | 1824 |     1 |
|       9 |   6 | 1825 |     1 |
|       9 |   6 | 1832 |     1 |
|       9 |   6 | 1833 |     1 |
|       9 |   6 | 1838 |     1 |
|       9 |   6 | 1843 |     2 |
|       9 |   6 | 1844 |     1 |
|       9 |   6 | 1845 |     1 |
|       9 |   6 | 1849 |     1 |
|       9 |   6 | 1852 |     1 |
|       9 |   6 | 1902 |     1 |
|       9 |   6 | 1908 |     1 |
|       9 |   6 | 1910 |     1 |
|       9 |   6 | 1916 |     1 |
|       9 |   6 | 1917 |     1 |
|       9 |   6 | 1921 |     1 |
|       9 |   6 | 1927 |     1 |
|       9 |   6 | 1932 |     1 |
|       9 |   6 | 1943 |     1 |
|       9 |   6 | 1945 |     1 |
|       9 |   6 | 1947 |     1 |
|       9 |   6 | 2038 |     1 |
|       9 |   6 | 2238 |     1 |
+---------+-----+------+-------+

;

SELECT * FROM magictriggerDB WHERE (magicId) NOT IN (   SELECT id FROM eqLogic WHERE magicId = id );
